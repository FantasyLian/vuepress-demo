# JS常用方法

## Javascript 的一些优化

1. 使用局部变量避免使用全局变量

   ```javascript
   function test() {
     var s = document.getElementById("aaa");
     s.innerHTML = document.body.clientHeight;
   }
   // 改为：
   function test() {
     var d = document;
     s = d.getElementById("aaa");
     s.innerHTML = d.body.clientHeight;
   }
   ```

2. 避免使用 with

   ```javascript
   function test() {
     with (document.body) {
       clientHeight = "200px";
       clientWidth = "200px";
     }
   }
   // 改为：
   function test() {
     var ds = document.body;
     ds.clientHeight = "200px";
     ds.clientWidth = "200px";
   }
   ```

3. 少用 var， 一个 var 加逗号

   ```javascript
   var a = 1;
   var b = 2;
   var c = 3;
   // 可以这样写：
   var a = 1,
     b = 2,
     c = 3;
   ```

4. 为多个同级元素绑定事件时，不用为每个都绑定，为它们的父级元素绑定就行了

   ```vue
   <template>
     <ul id="a">
       <li>aaaaaaa</li>
       <li>bbbbbbb</li>
       <li>ccccccc</li>
     </ul>
   </template>
   <script>
   // 要为每个 li 添加 click事件，只要为ul添加就行了，因为事件是向上冒泡的。
   var ul = document.getElementById("a");
   ul.onclick = function () {
     !e && (e = event);
     var target = e.srcElement || e.target;
     if (target.tagName == "li") {
       // do something
     }
   };
   </script>
   ```

5. appendChild 用的多时一定要用 documentFragment

   ```javascript
   for (var i = 0; i < 1000; i++) {
     var o = document.createElement("div");
     document.body.appendChild(o);
   }
   // 用 documentfragment:
   var f = document.createDocumentFragment();
   for (var i = 0; i < 1000; i++) {
     var o = document.createElement("div");
     f.appendChild(o);
   }
   document.body.appendChild(f);
   ```

6. if else 用的用法

   > `if else` >= 3 个，就用 `switch`; `if else` <= 3 个，用三元表达式; `if else` == 1, if 改 `&&`

   ```javascript
   if (a === 1) {
     a = 2;
   }
   // 改为：
   a === 1 && (a = 2);
   ```

## “星期几”的几种不同写法

- 第一种

  ```javascript
  const str = "";
  const week = new Date().getDay();
  if (week == 0) {
    str = "今天是星期日";
  } else if (week == 1) {
    str = "今天是星期一";
  } else if (week == 2) {
    str = "今天是星期二";
  } else if (week == 3) {
    str = "今天是星期三";
  } else if (week == 4) {
    str = "今天是星期四";
  } else if (week == 5) {
    str = "今天是星期五";
  } else if (week == 6) {
    str = "今天是星期六";
  }
  console.log(str);
  ```

- 第二种

  ```javascript
  const str = "今天是星期";
  const week = new Date().getDay();
  switch (week) {
    case 0:
      str1 += "日";
      break;
    case 1:
      str1 += "一";
      break;
    case 2:
      str1 += "二";
      break;
    case 3:
      str1 += "三";
      break;
    case 4:
      str1 += "四";
      break;
    case 5:
      str1 += "五";
      break;
    case 6:
      str1 += "六";
      break;
  }
  console.log(str);
  ```

- 第三种

  ```javascript
  const a = new Array("日", "一", "二", "三", "四", "五", "六");
  const week = new Date().getDay();
  const str = "今天是星期" + a[week];
  console.log(str);
  ```

- 第四种

  ```javascript
  const str = "今天是星期" + "日一二三四五六".charAt(new Date().getDay());
  console.log(str);
  ```
